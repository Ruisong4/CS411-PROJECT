<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">

<link rel="stylesheet" href="../css/header.css">
<link rel="stylesheet" href="../css/mainPage.css">
<link rel="stylesheet" href="../css/jquery.auto-complete.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script
        src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
        crossorigin="anonymous">
</script> <!-- loading jquery lib -->
<script src="../javascript/cookieTool.js"></script>
<script src="../javascript/header.js"></script>

<div id="navContainer">
    <img id="logo_img" src="../resources/img/plane.png">
    <div id="logo_div">ON TIME</div>
    <div id="navLinks">
        <a href="../manage_airport.html" class="navLink">Mamage Airport</a>
        <a href="javascript:void(0)" class="navLink">Search</a>
        <a class="navLink">News</a>
        <a class="navLink">Chat</a>
        <a id="showLogin" class="navLink">MY TRIP</a>
    </div>
</div>
<body style="height: 45%; margin: 0">
<div id="mainContainer">
    <img src="../resources/img/main_background.jpg" id="mainBack">
</div>
<div id="container0" style="background-color:rgba(255, 255, 255, 0.7); top: 4pc;height: 60%; width: 100%; left:20%">
    Delay Situation in 30 Days
</div>
<div id="container" style="background-color:rgba(255, 255, 255, 0.7); top: 4pc;height: 60%; width: 60%; left:20%">Delay
    Situation in 30 Days
</div>
<div id="container1" style="background-color:rgba(255, 255, 255, 0.7); top: 6pc;height: 60%;width: 60%; left:20%">
    Overall Delay Info
</div>
<div id="container2" style="background-color:rgba(255, 255, 255, 0.7); top: 8pc;height: 60%;width: 60%; left:20%">
    Overall Delay Info
</div>
<div id="container3" style="background-color:rgba(255, 255, 255, 0.7); top: 10pc;height: 60%;width: 60%; left:20%">User
    Delay Info
</div>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
<script type="text/javascript"
        src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>

<script type="text/javascript">

    var airport1_ = "LAX";
    var airport2_ = "ORD";
    var iata_to_airline = {
        "UA": "United Airlines", "AA": "American Airlines",
        "US": "US Airways", "F9": "Frontier Airlines",
        "B6": "Jetblue Airways", "OO": "Skywest Airlines",
        "AS": "Alaska Airlines", "NK": "Spirit Airlines",
        "WN": "Southwest Airlines", "DL": "Delta Airlines",
        "EV": "Atlantic Southeast Airlines", "HA": "Hawaiian Airlines",
        "MQ": "American Eagle Airlines", "VX": "Virgin America"
    };


    function chart0(airport1_, airport2_) {

        var dom = document.getElementById("container0");
        var myChart = echarts.init(dom);
        var app = {};
        option = null;
        var geoCoordMap = {

            'New York': [-74.0059413, 40.7127837],
            'Los Angeles': [-118.2436849, 34.0522342],
            'Chicago': [-87.6297982, 41.8781136],
            'Houston': [-95.3698028, 29.7604267],
            'Philadelphia': [-75.1652215, 39.9525839],
            'Phoenix': [-112.0740373, 33.4483771],
            'San Antonio': [-98.4936282, 29.4241219],
            'San Diego': [-117.1610838, 32.715738],
            'Dallas': [-96.7969879, 32.7766642],
            'San Jose': [-121.8863286, 37.3382082],
            'Austin': [-97.7430608, 30.267153],
            'Indianapolis': [-86.158068, 39.768403],
            'Jacksonville': [-81.655651, 30.3321838],
            'San Francisco': [-122.4194155, 37.7749295],
            'Columbus': [-82.9987942, 39.9611755],
            'Charlotte': [-80.8431267, 35.2270869],
            'Fort Worth': [-97.3307658, 32.7554883],
            'Detroit': [-83.0457538, 42.331427],
            'El Paso': [-106.4424559, 31.7775757],
            'Memphis': [-90.0489801, 35.1495343],
            'Seattle': [-122.3320708, 47.6062095],
            'Denver': [-104.990251, 39.7392358],
            'Washington': [-77.0368707, 38.9071923],
            'Boston': [-71.0588801, 42.3600825],
            'Nashville': [-86.7816016, 36.1626638],
            'Baltimore': [-76.6121893, 39.2903848],
            'Oklahoma City': [-97.5164276, 35.4675602],
            'Louisville': [-85.7584557, 38.2526647],
            'Portland': [-122.6764816, 45.5230622],
            'Las Vegas': [-115.1398296, 36.1699412],
            'Milwaukee': [-87.9064736, 43.0389025],
            'Albuquerque': [-106.6055534, 35.0853336],
            'Tucson': [-110.926479, 32.2217429],
            'Fresno': [-119.7725868, 36.7468422],
            'Sacramento': [-121.4943996, 38.5815719],
            'Long Beach': [-118.1937395, 33.7700504],
            'Kansas City': [-94.5785667, 39.0997265],
            'Mesa': [-111.8314724, 33.4151843],
            'Virginia Beach': [-75.977985, 36.8529263],
            'Atlanta': [-84.3879824, 33.7489954],
            'Colorado Springs': [-104.8213634, 38.8338816],
            'Omaha': [-95.9979883, 41.2523634],
            'Raleigh': [-78.6381787, 35.7795897],
            'Miami': [-80.1917902, 25.7616798],
            'Oakland': [-122.2711137, 37.8043637],
            'Minneapolis': [-93.2650108, 44.977753],
            'Tulsa': [-95.992775, 36.1539816],
            'Cleveland': [-81.6943605, 41.49932],
            'Wichita': [-97.336111, 37.688889],
            'Arlington': [-97.1080656, 32.735687],
            'New Orleans': [-90.0715323, 29.9510658],
            'Bakersfield': [-119.0187125, 35.3732921],
            'Tampa': [-82.4571776, 27.950575],
            'Honolulu': [-157.8583333, 21.3069444],
            'Aurora': [-104.8319195, 39.7294319],
            'Anaheim': [-117.9145036, 33.8352932],
            'Santa Ana': [-117.8678338, 33.7455731],
            'St. Louis': [-90.1994042, 38.6270025],
            'Riverside': [-117.3961564, 33.9533487],
            'Corpus Christi': [-97.396381, 27.8005828],
            'Lexington-Fayette': [-84.5037164, 38.0405837],
            'Pittsburgh': [-79.9958864, 40.4406248],
            'Anchorage': [-149.9002778, 61.2180556],
            'Stockton': [-121.2907796, 37.9577016],
            'Cincinnati': [-84.5120196, 39.1031182],
            'St. Paul': [-93.0899578, 44.9537029],
            'Toledo': [-83.555212, 41.6639383],
            'Greensboro': [-79.7919754, 36.0726354],
            'Newark': [-74.1723667, 40.735657],
            'Plano': [-96.6988856, 33.0198431],
            'Henderson': [-114.9817213, 36.0395247],
            'Lincoln': [-96.6851982, 40.8257625],
            'Buffalo': [-78.8783689, 42.8864468],
            'Jersey City': [-74.0776417, 40.7281575],
            'Chula Vista': [-117.0841955, 32.6400541],
            'Fort Wayne': [-85.1393513, 41.079273],
            'Orlando': [-81.3792365, 28.5383355],
            'St. Petersburg': [-82.64, 27.773056],
            'Chandler': [-111.8412502, 33.3061605],
            'Laredo': [-99.4803241, 27.5305671],
            'Norfolk': [-76.2858726, 36.8507689],
            'Durham': [-78.898619, 35.9940329],
            'Madison': [-89.4012302, 43.0730517],
            'Lubbock': [-101.8551665, 33.5778631],
            'Irvine': [-117.7946942, 33.6839473],
            'Winston-Salem': [-80.244216, 36.0998596],
            'Glendale': [-112.1859866, 33.5386523],
            'Garland': [-96.6388833, 32.912624],
            'Hialeah': [-80.2781057, 25.8575963],
            'Reno': [-119.8138027, 39.5296329],
            'Chesapeake': [-76.2874927, 36.7682088],
            'Gilbert': [-111.789027, 33.3528264],
            'Baton Rouge': [-91.1403196, 30.4582829],
            'Irving': [-96.9488945, 32.8140177],
            'Scottsdale': [-111.9260519, 33.4941704],
            'North Las Vegas': [-115.1175013, 36.1988592],
            'Fremont': [-121.9885719, 37.5482697],
            'Boise City': [-116.2146068, 43.6187102],
            'Richmond': [-77.4360481, 37.5407246],
            'San Bernardino': [-117.2897652, 34.1083449],
            'Birmingham': [-86.80249, 33.5206608],
            'Spokane': [-117.4260466, 47.6587802],
            'Rochester': [-77.6109219, 43.16103],
            'Des Moines': [-93.6091064, 41.6005448],
            'Modesto': [-120.9968782, 37.6390972],
            'Fayetteville': [-78.8783585, 35.0526641],
            'Tacoma': [-122.4442906, 47.2528768],
            'Oxnard': [-119.1770516, 34.1975048],
            'Fontana': [-117.435048, 34.0922335],
            'Columbus': [-84.9877094, 32.4609764],
            'Montgomery': [-86.2999689, 32.3668052],
            'Moreno Valley': [-117.2296717, 33.9424658],
            'Shreveport': [-93.7501789, 32.5251516],
            'Aurora': [-88.3200715, 41.7605849],
            'Yonkers': [-73.8987469, 40.9312099],
            'Akron': [-81.5190053, 41.0814447],
            'Huntington Beach': [-117.9992265, 33.660297],
            'Little Rock': [-92.2895948, 34.7464809],
            'Augusta-Richmond County': [-82.0105148, 33.4734978],
            'Amarillo': [-101.8312969, 35.2219971],
            'Glendale': [-118.255075, 34.1425078],
            'Mobile': [-88.0398912, 30.6953657],
            'Grand Rapids': [-85.6680863, 42.9633599],
            'Salt Lake City': [-111.8910474, 40.7607793],
            'Tallahassee': [-84.2807329, 30.4382559],
            'Huntsville': [-86.5861037, 34.7303688],
            'Grand Prairie': [-96.9977846, 32.7459645],
            'Knoxville': [-83.9207392, 35.9606384],
            'Worcester': [-71.8022934, 42.2625932],
            'Newport News': [-76.4730122, 37.0870821],
            'Brownsville': [-97.4974838, 25.9017472],
            'Overland Park': [-94.6707917, 38.9822282],
            'Santa Clarita': [-118.542586, 34.3916641],
            'Providence': [-71.4128343, 41.8239891],
            'Garden Grove': [-117.9414477, 33.7739053],
            'Chattanooga': [-85.3096801, 35.0456297],
            'Oceanside': [-117.3794834, 33.1958696],
            'Jackson': [-90.1848103, 32.2987573],
            'Fort Lauderdale': [-80.1373174, 26.1224386],
            'Santa Rosa': [-122.7140548, 38.440429],
            'Rancho Cucamonga': [-117.5931084, 34.1063989],
            'Port St. Lucie': [-80.3582261, 27.2730492],
            'Tempe': [-111.9400054, 33.4255104],
            'Ontario': [-117.6508876, 34.0633443],
            'Vancouver': [-122.6614861, 45.6387281],
            'Cape Coral': [-81.9495331, 26.5628537],
            'Sioux Falls': [-96.7311034, 43.5445959],
            'Springfield': [-93.2922989, 37.2089572],
            'Peoria': [-112.2373779, 33.5805955],
            'Pembroke Pines': [-80.2962555, 26.007765],
            'Elk Grove': [-121.3716178, 38.4087993],
            'Salem': [-123.0350963, 44.9428975],
            'Lancaster': [-118.1541632, 34.6867846],
            'Corona': [-117.5664384, 33.8752935],
            'Eugene': [-123.0867536, 44.0520691],
            'Palmdale': [-118.1164613, 34.5794343],
            'Salinas': [-121.6555013, 36.6777372],
            'Springfield': [-72.589811, 42.1014831],
            'Pasadena': [-95.2091006, 29.6910625],
            'Fort Collins': [-105.084423, 40.5852602],
            'Hayward': [-122.0807964, 37.6688205],
            'Pomona': [-117.7499909, 34.055103],
            'Cary': [-78.7811169, 35.79154],
            'Rockford': [-89.0939952, 42.2711311],
            'Alexandria': [-77.0469214, 38.8048355],
            'Escondido': [-117.086421, 33.1192068],
            'McKinney': [-96.6397822, 33.1972465],
            'Kansas City': [-94.6274636, 39.114053],
            'Joliet': [-88.0817251, 41.525031],
            'Sunnyvale': [-122.0363496, 37.36883],
            'Torrance': [-118.3406288, 33.8358492],
            'Bridgeport': [-73.1951767, 41.1865478],
            'Lakewood': [-105.0813734, 39.7047095],
            'Hollywood': [-80.1494901, 26.0112014],
            'Paterson': [-74.171811, 40.9167654],
            'Naperville': [-88.1535352, 41.7508391],
            'Syracuse': [-76.1474244, 43.0481221],
            'Mesquite': [-96.5991593, 32.7667955],
            'Dayton': [-84.1916069, 39.7589478],
            'Savannah': [-81.0998342, 32.0835407],
            'Clarksville': [-87.3594528, 36.5297706],
            'Orange': [-117.8531119, 33.7877944],
            'Pasadena': [-118.1445155, 34.1477849],
            'Fullerton': [-117.9242966, 33.8703596],
            'Killeen': [-97.7277959, 31.1171194],
            'Frisco': [-96.8236116, 33.1506744],
            'Hampton': [-76.3452218, 37.0298687],
            'McAllen': [-98.2300124, 26.2034071],
            'Warren': [-83.0146526, 42.5144566],
            'Bellevue': [-122.2006786, 47.610377],
            'West Valley City': [-112.0010501, 40.6916132],
            'Columbia': [-81.0348144, 34.0007104],
            'Olathe': [-94.8191285, 38.8813958],
            'Sterling Heights': [-83.0302033, 42.5803122],
            'New Haven': [-72.9278835, 41.308274],
            'Miramar': [-80.3035602, 25.9860762],
            'Waco': [-97.1466695, 31.549333],
            'Thousand Oaks': [-118.8375937, 34.1705609],
            'Cedar Rapids': [-91.6656232, 41.9778795],
            'Charleston': [-79.9310512, 32.7764749],
            'Visalia': [-119.2920585, 36.3302284],
            'Topeka': [-95.6890185, 39.0558235],
            'Elizabeth': [-74.2107006, 40.6639916],
            'Gainesville': [-82.3248262, 29.6516344],
            'Thornton': [-104.9719243, 39.8680412],
            'Roseville': [-121.2880059, 38.7521235],
            'Carrollton': [-96.8899636, 32.9756415],
            'Coral Springs': [-80.2706044, 26.271192],
            'Stamford': [-73.5387341, 41.0534302],
            'Simi Valley': [-118.781482, 34.2694474],
            'Concord': [-122.0310733, 37.9779776],
            'Hartford': [-72.6850932, 41.7637111],
            'Kent': [-122.2348431, 47.3809335],
            'Lafayette': [-92.0198427, 30.2240897],
            'Midland': [-102.0779146, 31.9973456],
            'Surprise': [-112.3679279, 33.6292337],
            'Denton': [-97.1330683, 33.2148412],
            'Victorville': [-117.2927641, 34.5362184],
            'Evansville': [-87.5710898, 37.9715592],
            'Santa Clara': [-121.9552356, 37.3541079],
            'Abilene': [-99.7331439, 32.4487364],
            'Athens-Clarke County': [-83.357567, 33.9519347],
            'Vallejo': [-122.2566367, 38.1040864],
            'Allentown': [-75.4901833, 40.6084305],
            'Norman': [-97.4394777, 35.2225668],
            'Beaumont': [-94.1265562, 30.080174],
            'Independence': [-94.4155068, 39.0911161],
            'Murfreesboro': [-86.39027, 35.8456213],
            'Ann Arbor': [-83.7430378, 42.2808256],
            'Springfield': [-89.6501481, 39.7817213],
            'Berkeley': [-122.272747, 37.8715926],
            'Peoria': [-89.5889864, 40.6936488],
            'Provo': [-111.6585337, 40.2338438],
            'El Monte': [-118.0275667, 34.0686206],
            'Columbia': [-92.3340724, 38.9517053],
            'Lansing': [-84.5555347, 42.732535],
            'Fargo': [-96.7898034, 46.8771863],
            'Downey': [-118.1331593, 33.9401088],
            'Costa Mesa': [-117.9186689, 33.6411316],
            'Wilmington': [-77.9447102, 34.2257255],
            'Arvada': [-105.0874842, 39.8027644],
            'Inglewood': [-118.3531311, 33.9616801],
            'Miami Gardens': [-80.2456045, 25.9420377],
            'Carlsbad': [-117.3505939, 33.1580933],
            'Westminster': [-105.0372046, 39.8366528],
            'Rochester': [-92.4801989, 44.0121221],
            'Odessa': [-102.3676431, 31.8456816],
            'Manchester': [-71.4547891, 42.9956397],
            'Elgin': [-88.2825668, 42.0354084],
            'West Jordan': [-111.9391031, 40.6096698],
            'Round Rock': [-97.678896, 30.5082551],
            'Clearwater': [-82.8001026, 27.9658533],
            'Waterbury': [-73.0514965, 41.5581525],
            'Gresham': [-122.4302013, 45.5001357],
            'Fairfield': [-122.0399663, 38.2493581],
            'Billings': [-108.5006904, 45.7832856],
            'Lowell': [-71.3161718, 42.6334247],
            'San Buenaventura (Ventura)': [-119.2290316, 34.274646],
            'Pueblo': [-104.6091409, 38.2544472],
            'High Point': [-80.0053176, 35.9556923],
            'West Covina': [-117.9389526, 34.0686208],
            'Richmond': [-122.3477486, 37.9357576],
            'Murrieta': [-117.2139232, 33.5539143],
            'Cambridge': [-71.1097335, 42.3736158],
            'Antioch': [-121.805789, 38.0049214],
            'Temecula': [-117.1483648, 33.4936391],
            'Norwalk': [-118.081733, 33.9022367],
            'Centennial': [-104.8771726, 39.5807452],
            'Everett': [-122.2020794, 47.9789848],
            'Palm Bay': [-80.5886646, 28.0344621],
            'Wichita Falls': [-98.4933873, 33.9137085],
            'Green Bay': [-88.019826, 44.519159],
            'Daly City': [-122.4702079, 37.6879241],
            'Burbank': [-118.3089661, 34.1808392],
            'Richardson': [-96.7298519, 32.9483335],
            'Pompano Beach': [-80.1247667, 26.2378597],
            'North Charleston': [-79.9748103, 32.8546197],
            'Broken Arrow': [-95.7974526, 36.060949],
            'Boulder': [-105.2705456, 40.0149856],
            'West Palm Beach': [-80.0533746, 26.7153424],
            'Santa Maria': [-120.4357191, 34.9530337],
            'El Cajon': [-116.9625269, 32.7947731],
            'Davenport': [-90.5776367, 41.5236437],
            'Rialto': [-117.3703235, 34.1064001],
            'Las Cruces': [-106.7636538, 32.3199396],
            'San Mateo': [-122.3255254, 37.5629917],
            'Lewisville': [-96.994174, 33.046233],
            'South Bend': [-86.2519898, 41.6763545],
            'Lakeland': [-81.9498042, 28.0394654],
            'Erie': [-80.085059, 42.1292241],
            'Tyler': [-95.3010624, 32.3512601],
            'Pearland': [-95.2860474, 29.5635666],
            'College Station': [-96.3344068, 30.627977],
            'Kenosha': [-87.8211854, 42.5847425],
            'Sandy Springs': [-84.3733147, 33.9304352],
            'Clovis': [-119.7029194, 36.8252277],
            'Flint': [-83.6874562, 43.0125274],
            'Roanoke': [-79.9414266, 37.2709704],
            'Albany': [-73.7562317, 42.6525793],
            'Jurupa Valley': [-117.4854802, 33.9971974]
        };
        var message = "fail";

        function ajaxRePost() {
            var options = {
                type: "GET",
                url: "../php/GetAirline.php",
                data: {},
                async: false,
                success: function (msg) {
                    message = msg;
                },
                fail: function () {
                    alert(message);
                }
            };
            $.ajax(options);
            return message;
        }

        var n = JSON.parse(ajaxRePost());
        var iata_code = new Array();
        var airlines = new Array();
        for (var i in n) {
            iata_code[i] = n[i].iata_code;
            airlines[i] = n[i].airline;
        }

        function getroutes(arg1, arg2) {
            var options = {
                type: "GET",
                url: "../php/Get_cities.php",
                data: {iata1: arg1, iata2: arg2},
                async: false,
                success: function (msg) {
                    message = msg;
                    //alert(message);
                },
                fail: function () {
                    alert(message);
                }
            };
            $.ajax(options);

            return message;
        }

        function transfrom_array(arr) {
            arr.push([{name: routes[0].city}, {name: routes[1].city, value: 95}]);
        }

        var routes = JSON.parse(getroutes(airport1_, airport2_));
        var UA_Route = new Array();
        transfrom_array(UA_Route);


        var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';

        var convertData = function (data) {
            var res = [];
            for (var i = 0; i < data.length; i++) {
                var dataItem = data[i];
                var fromCoord = geoCoordMap[dataItem[0].name];
                var toCoord = geoCoordMap[dataItem[1].name];
                if (fromCoord && toCoord) {
                    res.push({
                        fromName: dataItem[0].name,
                        toName: dataItem[1].name,
                        coords: [fromCoord, toCoord]
                    });
                }
            }
            return res;
        };
        //var data_to_draw = {fromName: iata_to_airline[airport1_], iata}
        var ob = convertData(UA_Route);
        // for(key in ob){
        //     document.write(ob.fromName);
        // }
        //document.write(convertData(UA_Route))

        var color = ['#a6c84c', '#ffa022', '#46bee9', '#a6c84c', '#ffa022', '#46bee9', '#a6c84c', '#ffa022', '#46bee9', '#ffa022', '#46bee9', '#a6c84c', '#ffa022', '#46bee9'];
        var series = [];
        [['Your Selected Route', UA_Route]].forEach(function (item, i) {
            series.push({
                    name: item[0] + ' Major Routes',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },
                {
                    name: item[0],
                    type: 'lines',
                    zlevel: 2,
                    symbol: ['none', 'arrow'],
                    symbolSize: 10,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0,
                        symbol: planePath,
                        symbolSize: 15
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 1,
                            opacity: 0.6,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },
                {
                    name: item[0] + ' Major Routes',
                    type: 'effectScatter',
                    coordinateSystem: 'geo',
                    zlevel: 2,
                    rippleEffect: {
                        brushType: 'stroke'
                    },
                    label: {
                        normal: {
                            show: true,
                            position: 'right',
                            formatter: '{b}'
                        }
                    },
                    symbolSize: function (val) {
                        return val[2] / 8;
                    },
                    itemStyle: {
                        normal: {
                            color: color[i]
                        }
                    },
                    data: item[1].map(function (dataItem) {
                        return {
                            name: dataItem[0].name,
                            value: geoCoordMap[dataItem[0].name].concat([dataItem[0].value])
                        };
                    })
                },
                {
                    name: item[0] + ' Major Routes',
                    type: 'effectScatter',
                    coordinateSystem: 'geo',
                    zlevel: 2,
                    rippleEffect: {
                        brushType: 'stroke'
                    },
                    label: {
                        normal: {
                            show: true,
                            position: 'right',
                            formatter: '{b}'
                        }
                    },
                    symbolSize: function (val) {
                        return val[2] / 8;
                    },
                    itemStyle: {
                        normal: {
                            color: color[i]
                        }
                    },
                    data: item[1].map(function (dataItem) {
                        return {
                            name: dataItem[1].name,
                            value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
                        };
                    })
                }
            );
        });

        option = {
            backgroundColor: '#404a59',
            title: {
                text: 'Flight On Time Visualization System: From ' + airport1_ + " To " + airport2_,
                subtext: 'For routes connectiong the biggest 300 US cities',
                left: 'center',
                textStyle: {
                    color: '#fff',
                    fontSize: 20

                }
            },


            legend: {
                orient: 'vertical',
                top: 'top',
                left: 'left',
                data: ['Your Selected Route'],

                textStyle: {
                    color: '#fff'
                },
                selectedMode: 'single'
            },
            series: series,
            geo: {
                map: 'world',
                center: [-94.5785667, 39.0997265],
                zoom: 5,
                label: {
                    emphasis: {
                        show: false
                    }
                },
                roam: true,
                silent: true,
                itemStyle: {
                    normal: {
                        areaColor: '#323c48',
                        borderColor: '#404a59'
                    },
                    emphasis: {
                        areaColor: '#323c48',
                        borderColor: '#404a59'
                    }
                }
            }
        };
        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        }
    }

    chart0(airport1_, airport2_);

</script>


<script type="text/javascript">
    var iata_to_airline = {
        "UA": "United Airlines", "AA": "American Airlines",
        "US": "US Airways", "F9": "Frontier Airlines",
        "B6": "Jetblue Airways", "OO": "Skywest Airlines",
        "AS": "Alaska Airlines", "NK": "Spirit Airlines",
        "WN": "Southwest Airlines", "DL": "Delta Airlines",
        "EV": "Atlantic Southeast Airlines", "HA": "Hawaiian Airlines",
        "MQ": "American Eagle Airlines", "VX": "Virgin America"
    };

    function chart1(airport1_, airport2_) {
        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        var app = {};
        option = null;
        var cellSize = [80, 80];
        var pieRadius = 30;

        var message = "fail";

        function getroutes(iata, iata1) {
            var options = {
                type: "GET",
                url: "../php/airline_chart.php",
                data: {airport: iata, airport1: iata1},
                async: false,
                success: function (msg) {
                    message = msg;
                },
                fail: function () {
                    alert(message);
                }
            };
            $.ajax(options);
            return message;
        }

        var delay_info = JSON.parse(getroutes(airport1_, airport2_));


        function getVirtulData() {
            var date = +echarts.number.parseDate('2017-02-01');
            var end = +echarts.number.parseDate('2017-03-01');
            var dayTime = 3600 * 24 * 1000;
            var data = [];
            for (var time = date; time < end; time += dayTime) {
                data.push([
                    echarts.format.formatTime('yyyy-MM-dd', time),
                    Math.floor(Math.random() * 10000)
                ]);
            }
            return data;
        }


        function getPieSeries(scatterData, chart) {
            return echarts.util.map(scatterData, function (item, index) {
                var center = chart.convertToPixel('calendar', item);
                return {
                    id: index + 'pie',
                    type: 'pie',
                    center: center,
                    label: {
                        normal: {
                            formatter: '{c}',
                            position: 'inside'
                        }
                    },
                    radius: pieRadius,
                    data: [
                        {name: 'Delay for more than one hour', value: delay_info[index].acs},
                        {name: 'Delay', value: delay_info[index].ac},
                        {name: 'On time', value: delay_info[index].ttl}
                    ]
                };
            });
        }

        function getPieSeriesUpdate(scatterData, chart) {
            return echarts.util.map(scatterData, function (item, index) {
                var center = chart.convertToPixel('calendar', item);
                return {
                    id: index + 'pie',
                    center: center
                };
            });
        }

        var scatterData = getVirtulData();

        option = {
            title: {
                text: 'Delay Situation in 30 Days',
                left: 'center',
            },
            tooltip: {},
            legend: {
                data: ['Delay for more than one hour', 'Delay', 'On time'],
                bottom: 20
            },
            calendar: {
                top: 'middle',
                left: 'center',
                orient: 'vertical',
                cellSize: cellSize,
                yearLabel: {
                    show: false,
                    textStyle: {
                        fontSize: 30
                    }
                },
                dayLabel: {
                    margin: 20,
                    firstDay: 1,
                    nameMap: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
                },
                monthLabel: {
                    show: false
                },
                range: ['2017-02']
            },
            series: [{
                id: 'label',
                type: 'scatter',
                coordinateSystem: 'calendar',
                symbolSize: 1,
                label: {
                    normal: {
                        show: true,
                        formatter: function (params) {
                            return echarts.format.formatTime('dd', params.value[0]);
                        },
                        offset: [-cellSize[0] / 2 + 10, -cellSize[1] / 2 + 10],
                        textStyle: {
                            color: '#000',
                            fontSize: 14
                        }
                    }
                },
                data: scatterData
            }]
        };

        if (!app.inNode) {
            var pieInitialized;
            setTimeout(function () {
                pieInitialized = true;
                myChart.setOption({
                    series: getPieSeries(scatterData, myChart)
                });
            }, 10);

            app.onresize = function () {
                if (pieInitialized) {
                    myChart.setOption({
                        series: getPieSeriesUpdate(scatterData, myChart)
                    });
                }
            };
        }
        ;
        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        }
    }

    chart1(airport1_, airport2_);
</script>


<script type="text/javascript">

    function chart2(airport1_, airport2_) {
        var dom1 = document.getElementById("container1");
        var myChart1 = echarts.init(dom1);
        var app1 = {};
        option1 = null;
        var message1 = "fail";

        function getroutes1(iata, iata1) {
            var options = {
                type: "GET",
                url: "../php/airline_chart1.php",
                data: {airport: iata, airport1: iata1},
                async: false,
                success: function (msg) {
                    message = msg;
                },
                fail: function () {
                    alert(message);
                }
            };
            $.ajax(options);
            return message;
        }

        var delay_info1 = JSON.parse(getroutes1(airport1_, airport2_));

        option1 = {
            title: {
                text: 'Overall Delay Situation',
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['More than 2 hours', 'More than 1 hour', 'Delay', 'On time', 'Departure before scheduled time']
            },
            series: [
                {
                    name: 'Total Sample',
                    type: 'pie',
                    radius: '55%',
                    center: ['50%', '60%'],
                    data: [
                        {value: delay_info1[0].acss, name: 'More than 2 hours'},
                        {value: delay_info1[0].acs - delay_info1[0].acss, name: 'More than 1 hour'},
                        {value: delay_info1[0].ac - delay_info1[0].acs, name: 'Delay'},
                        {value: delay_info1[0].ttl - delay_info1[0].ac, name: 'On time'},
                        {value: delay_info1[0].acc, name: 'Departure before scheduled time'}
                    ],
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        ;
        if (option1 && typeof option1 === "object") {
            myChart1.setOption(option1, true);
        }
    }

    chart2(airport1_, airport2_);
</script>

<script type="text/javascript">


    function chart3(airport1_, airport2_) {
        var message = "fail";

        function getroutes(iata, iata1) {
            var options = {
                type: "GET",
                url: "../php/airline_chart2.php",
                data: {airport: iata, airport1: iata1},
                async: false,
                success: function (msg) {
                    message = msg;
                },
                fail: function () {
                    alert(message);
                }
            };
            $.ajax(options);
            return message;
        }

        var delay_info = JSON.parse(getroutes(airport1_, airport2_));
        var more_than_two = new Array();
        var more_than_one = new Array();
        var just_delay = new Array();
        var on_time = new Array();
        var iata = new Array();
        var airports = new Array();

        for (key in delay_info) {
            iata[key] = delay_info[key].air;
            more_than_two[key] = delay_info[key].acss / delay_info[key].ttl * 100;
            more_than_one[key] = (delay_info[key].acs - delay_info[key].acss) / delay_info[key].ttl * 100;
            just_delay[key] = (delay_info[key].ac - delay_info[key].acs) / delay_info[key].ttl * 100;
            on_time[key] = (delay_info[key].ttl - delay_info[key].ac) / delay_info[key].ttl * 100;
            airports[key] = iata_to_airline[iata[key]];
        }

        var dom = document.getElementById("container2");
        var myChart = echarts.init(dom);
        var app = {};
        option = null;

        var posList = [
            'left', 'right', 'top', 'bottom',
            'inside',
            'insideTop', 'insideLeft', 'insideRight', 'insideBottom',
            'insideTopLeft', 'insideTopRight', 'insideBottomLeft', 'insideBottomRight'
        ];

        app.configParameters = {
            rotate: {
                min: -90,
                max: 90
            },
            align: {
                options: {
                    left: 'left',
                    center: 'center',
                    right: 'right'
                }
            },
            verticalAlign: {
                options: {
                    top: 'top',
                    middle: 'middle',
                    bottom: 'bottom'
                }
            },
            position: {
                options: echarts.util.reduce(posList, function (map, pos) {
                    map[pos] = pos;
                    return map;
                }, {})
            },
            distance: {
                min: 0,
                max: 100
            }
        };

        app.config = {
            rotate: 90,
            align: 'left',
            verticalAlign: 'middle',
            position: 'insideBottom',
            distance: 15,
            onChange: function () {
                var labelOption = {
                    normal: {
                        rotate: app.config.rotate,
                        align: app.config.align,
                        verticalAlign: app.config.verticalAlign,
                        position: app.config.position,
                        distance: app.config.distance
                    }
                };
                myChart.setOption({
                    series: [{
                        label: labelOption
                    }, {
                        label: labelOption
                    }, {
                        label: labelOption
                    }, {
                        label: labelOption
                    }]
                });
            }
        };


        var labelOption = {
            normal: {
                show: true,
                position: app.config.position,
                distance: app.config.distance,
                align: app.config.align,
                verticalAlign: app.config.verticalAlign,
                rotate: app.config.rotate,
                formatter: '{c}  {name|{a}}',
                fontSize: 16,
                rich: {
                    name: {
                        textBorderColor: '#fff'
                    }
                }
            }
        };

        option = {
            title: {
                text: 'Delay Information for different airlines in this airport',
                left: 'center',
            },
            color: ['#003366', '#006699', '#4cabce', '#e5323e', '#003366', '#006699', '#4cabce', '#e5323e'],
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            legend: {
                orient: 'horizontal',
                bottom: 'bottom',
            },
            toolbox: {
                show: false,
                orient: 'vertical',
                left: 'right',
                top: 'center',
                feature: {
                    mark: {show: true},
                    dataView: {show: true, readOnly: false},
                    magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            calculable: true,
            xAxis: [
                {
                    type: 'category',
                    axisTick: {show: false},
                    data: airports
                }
            ],
            yAxis: [
                {
                    type: 'value'
                }
            ],
            series: [
                {
                    name: 'On Time',
                    type: 'bar',
                    barGap: 0,
                    label: labelOption,
                    data: on_time
                },
                {
                    name: 'Delay',
                    type: 'bar',
                    label: labelOption,
                    data: just_delay
                },
                {
                    name: 'More than 1 hour',
                    type: 'bar',
                    label: labelOption,
                    data: more_than_one
                },
                {
                    name: 'more than 2 hour',
                    type: 'bar',
                    label: labelOption,
                    data: more_than_two
                }
            ]
        };
        ;
        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        }
    }

    chart3(airport1_, airport2_);

</script>

<script type="text/javascript">


    function chart4(airport1_, airport2_) {
        var message = "fail";

        function getroutes(iata, iata1) {
            var options = {
                type: "GET",
                url: "../php/GetUserReview.php",
                data: {airport: iata, airport1: iata1},
                async: false,
                success: function (msg) {
                    message = msg;
                },
                fail: function () {
                    alert(message);
                }
            };
            $.ajax(options);
            return message;
        }

        var delay_info = JSON.parse(getroutes(airport1_, airport2_));
        var more_than_two = new Array();
        var more_than_one = new Array();
        var just_delay = new Array();
        var on_time = new Array();
        var iata = new Array();
        var airports = new Array();

        for (key in delay_info) {
            iata[key] = delay_info[key].air;
            more_than_two[key] = delay_info[key].ac / delay_info[key].ttl * 100;
            more_than_one[key] = (delay_info[key].acs) / delay_info[key].ttl * 100;
            just_delay[key] = (delay_info[key].acc) / delay_info[key].ttl * 100;
            on_time[key] = (delay_info[key].acss) / delay_info[key].ttl * 100;
            airports[key] = iata_to_airline[iata[key]];
        }

        var dom = document.getElementById("container3");
        var myChart = echarts.init(dom);
        var app = {};
        option = null;

        var posList = [
            'left', 'right', 'top', 'bottom',
            'inside',
            'insideTop', 'insideLeft', 'insideRight', 'insideBottom',
            'insideTopLeft', 'insideTopRight', 'insideBottomLeft', 'insideBottomRight'
        ];

        app.configParameters = {
            rotate: {
                min: -90,
                max: 90
            },
            align: {
                options: {
                    left: 'left',
                    center: 'center',
                    right: 'right'
                }
            },
            verticalAlign: {
                options: {
                    top: 'top',
                    middle: 'middle',
                    bottom: 'bottom'
                }
            },
            position: {
                options: echarts.util.reduce(posList, function (map, pos) {
                    map[pos] = pos;
                    return map;
                }, {})
            },
            distance: {
                min: 0,
                max: 100
            }
        };

        app.config = {
            rotate: 90,
            align: 'left',
            verticalAlign: 'middle',
            position: 'insideBottom',
            distance: 15,
            onChange: function () {
                var labelOption = {
                    normal: {
                        rotate: app.config.rotate,
                        align: app.config.align,
                        verticalAlign: app.config.verticalAlign,
                        position: app.config.position,
                        distance: app.config.distance
                    }
                };
                myChart.setOption({
                    series: [{
                        label: labelOption
                    }, {
                        label: labelOption
                    }, {
                        label: labelOption
                    }, {
                        label: labelOption
                    }]
                });
            }
        };


        var labelOption = {
            normal: {
                show: true,
                position: app.config.position,
                distance: app.config.distance,
                align: app.config.align,
                verticalAlign: app.config.verticalAlign,
                rotate: app.config.rotate,
                formatter: '{c}  {name|{a}}',
                fontSize: 16,
                rich: {
                    name: {
                        textBorderColor: '#fff'
                    }
                }
            }
        };

        option = {
            title: {
                text: 'User Review Statistics for Each Airline',
                left: 'center',
            },
            color: ['#003366', '#006699', '#4cabce', '#e5323e', '#003366', '#006699', '#4cabce', '#e5323e'],
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            legend: {
                orient: 'horizontal',
                bottom: 'bottom',
            },
            toolbox: {
                show: false,
                orient: 'vertical',
                left: 'right',
                top: 'center',
                feature: {
                    mark: {show: true},
                    dataView: {show: true, readOnly: false},
                    magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            calculable: true,
            xAxis: [
                {
                    type: 'category',
                    axisTick: {show: false},
                    data: airports
                }
            ],
            yAxis: [
                {
                    type: 'value'
                }
            ],
            series: [
                {
                    name: 'no delay',
                    type: 'bar',
                    barGap: 0,
                    label: labelOption,
                    data: on_time
                },
                {
                    name: 'above thirty',
                    type: 'bar',
                    label: labelOption,
                    data: just_delay
                },
                {
                    name: 'below fifteen',
                    type: 'bar',
                    label: labelOption,
                    data: more_than_one
                },
                {
                    name: 'below thirty',
                    type: 'bar',
                    label: labelOption,
                    data: more_than_two
                }
            ]
        };
        ;
        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        }
    }

    chart4(airport1_, airport2_);

</script>

<div id="globalLayer">
    <div id="loginContainer">
        <div id="closeLogin">X</div>
        <div class="textHint">Email Address</div>
        <input id="username" type="text">
        <div id="usernameHint" class="errorHint"></div>
        <div class="textHint">password</div>
        <input id="password" type="password">
        <div id="passwordHint" class="errorHint"></div>
        <div style="display: none" class="textHint hideForm">Confirm password</div>
        <input id="confirm_password" style="display: none" type="password" class="hideForm">
        <div id="confirmHint" style="display: none" class="errorHint hideForm"></div>
        <div id="login_button">Sign in</div>
        <div id="changeMode">
            <div id="changeInfo">need an account?</div>
            <div id="changeButton">sign up</div>
        </div>
    </div>
</div>
</body>
</html>